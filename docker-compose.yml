name: agent-workspace

services:
  agent:
    build: .
    stdin_open: true
    tty: true
    tmpfs:
      - /tmp
    security_opt:
      - no-new-privileges:true
    volumes:
      # Named volume: persists agent auth tokens and config across restarts.
      # WARNING: deleted permanently by `docker compose down -v`.
      - agent-home:/home/agent
      # Bind mount: your project files on the host. Always safe across restarts.
      - ./workspace:/workspace
    networks:
      - agent-network

volumes:
  agent-home:

networks:
  agent-network:
    driver: bridge
